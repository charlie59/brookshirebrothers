<?php

/**
 * @file
 * Custom functions and hooks for Brookshire Brothers
 *
 */

/**
 * Implements hook_menu().
 */
function brookshirebrotherscustom_menu() {

  $items = array();

  $items['store_updater'] = array(
    'title' => 'Test Functions',
    'page callback' => 'brookshirebrotherscustom_store_updater',
    'type' => MENU_CALLBACK,
    'access arguments' => array('access administration pages'),
    'file' => 'includes/store_updater.inc'
  );

  $items['admin/describe'] = array(
    'title' => 'Test Functions',
    'page callback' => 'brookshirebrotherscustom_describe',
    'type' => MENU_CALLBACK,
    'access arguments' => array('access administration pages'),
  );

  return $items;
}

function brookshirebrotherscustom_describe() {

  require_once (SOAP_CLIENT_BASEDIR.'/SforceEnterpriseClient.php');
  require_once (SOAP_CLIENT_BASEDIR.'/SforceHeaderOptions.php');
  require_once (SOAP_CLIENT_BASEDIR.'/SforceBaseClient.php');

  try {
    $mySforceConnection = new SforceEnterpriseClient();
    $mySoapClient = $mySforceConnection->createConnection(SOAP_CLIENT_BASEDIR.'/enterprise.wsdl.xml');
    $mylogin = $mySforceConnection->login(SOAP_CLIENT_USER, SOAP_CLIENT_PASSWORD);
    $response = $mySforceConnection->describeSObject("Account");
    print_r($response);


  } catch (Exception $e) {
    echo $mySforceConnection->getLastRequest();
    echo $e->faultstring;
  }
}